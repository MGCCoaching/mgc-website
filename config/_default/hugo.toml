# Hugo Core Configuration
# ==============================================================================

baseURL = 'https://mariegaetanecomte.fr/'
title = 'Marie-Gaëtane Comte'
defaultContentLanguage = 'fr'
defaultContentLanguageInSubdir = false

# Build Settings
# ------------------------------------------------------------------------------
enableRobotsTXT = true
enableGitInfo = false
enableEmoji = true

# Security - autoriser HEAD pour GetRemote
[security]
  [security.http]
    methods = ['(?i)GET|POST|HEAD']
    urls = ['.*']

# Content Settings
# ------------------------------------------------------------------------------
summaryLength = 70
pagerSize = 10
timeout = '60s'

# URL Settings
# ------------------------------------------------------------------------------
canonifyURLs = false
relativeURLs = false
uglyURLs = false

# Taxonomies
# ------------------------------------------------------------------------------
# [taxonomies]
#   tag = 'tags'
#   category = 'categories'

# Permalinks
# ------------------------------------------------------------------------------
[permalinks]
  posts = '/:year/:month/:slug/'
  pages = '/:slug/'

# ==============================================================================
# OUTPUT FORMATS - CRITICAL FOR RSS
# ==============================================================================

# Define media types
[mediaTypes]
  [mediaTypes."application/rss+xml"]
    suffixes = ["xml"]

# Define output formats
[outputFormats]
  [outputFormats.RSS]
    mediaType = "application/rss+xml"
    baseName = "index"
    isPlainText = true    # ← CRUCIAL: Prevents HTML escaping!
    notAlternative = false
  
  # Custom podcast RSS (alternative approach)
  [outputFormats.PodcastRSS]
    mediaType = "application/rss+xml"
    baseName = "index"
    isPlainText = true    # ← CRUCIAL: Prevents HTML escaping!
    path = ""

# Outputs per section type
[outputs]
  home = ['HTML', 'RSS']
  section = ['HTML', 'RSS']
  page = ['HTML']

# ==============================================================================
# MINIFICATION - Disable XML minification to avoid issues
# ==============================================================================
[minify]
  disableCSS = false
  disableHTML = false
  disableJS = false
  disableJSON = false
  disableSVG = false
  disableXML = true       # ← Disable XML minification for RSS
  minifyOutput = true

# Module Mounts
# ------------------------------------------------------------------------------
[module]
  [[module.mounts]]
    source = 'assets'
    target = 'assets'
  [[module.mounts]]
    disableWatch = true
    source = 'hugo_stats.json'
    target = 'assets/notwatching/hugo_stats.json'

# Build Settings for Tailwind
# ------------------------------------------------------------------------------
[build]
  [build.buildStats]
    enable = true
  [[build.cachebusters]]
    source = 'assets/notwatching/hugo_stats\.json'
    target = 'css'
  [[build.cachebusters]]
    source = '(postcss|tailwind)\.config\.js'
    target = 'css'

# Markup Settings
# ------------------------------------------------------------------------------
[markup]
  [markup.goldmark]
    [markup.goldmark.renderer]
      unsafe = true
  [markup.highlight]
    style = 'monokai'
    lineNos = false
    codeFences = true

# Languages
# ==============================================================================
[languages]
  [languages.fr]
    languageCode = 'fr-FR'
    languageName = 'Français'
    weight = 1
    title = 'Marie-Gaëtane Comte'


[params.colors]
  accent = "#D4A574"      # Pour le player