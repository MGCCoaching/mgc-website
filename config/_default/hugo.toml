# Hugo Core Configuration
# ==============================================================================

baseURL = 'https://mariegaetanecomte.fr/'
title = 'Marie-Gaëtane Comte'
defaultContentLanguage = 'fr'
defaultContentLanguageInSubdir = false

# Build Settings
# ------------------------------------------------------------------------------
enableRobotsTXT = true
enableGitInfo = false
enableEmoji = true

# Security - autoriser HEAD pour GetRemote
[security]
  [security.http]
    methods = ['(?i)GET|POST|HEAD']
    urls = ['.*']

# Content Settings
# ------------------------------------------------------------------------------
summaryLength = 70
pagerSize = 10
timeout = '60s'

# URL Settings
# ------------------------------------------------------------------------------
canonifyURLs = false
relativeURLs = false
uglyURLs = false

# Taxonomies & RSS Global - Désactivés pour un Sitemap propre
# ------------------------------------------------------------------------------
disableKinds = ["taxonomy", "term", "RSS"]

# Permalinks
# ------------------------------------------------------------------------------
[permalinks]
  posts = '/:year/:month/:slug/'
  pages = '/:slug/'

# ==============================================================================
# OUTPUT FORMATS - CRITICAL FOR RSS
# ==============================================================================

[mediaTypes]
  [mediaTypes."application/rss+xml"]
    suffixes = ["xml"]

[outputFormats]
  [outputFormats.RSS]
    mediaType = "application/rss+xml"
    baseName = "index"
    isPlainText = true
    notAlternative = false
  
  [outputFormats.PodcastRSS]
    mediaType = "application/rss+xml"
    baseName = "index"
    isPlainText = true
    path = ""

  [outputFormats.chapters]
    mediaType = "application/json"
    baseName = "chapters"
    isPlainText = true
    
  [outputFormats.data]
    mediaType = "application/json"
    baseName = "data"
    isPlainText = true

[outputs]
  home = ['HTML']
  section = ['HTML']
  page = ['HTML']

# ==============================================================================
# MINIFICATION
# ==============================================================================
[minify]
  disableCSS = false
  disableHTML = false
  disableJS = false
  disableJSON = false
  disableSVG = false
  disableXML = true       # Important pour ne pas corrompre les flux RSS
  minifyOutput = true

# ==============================================================================
# BUILD SETTINGS (Tailwind & Sitemap)
# ==============================================================================
[build]
  [build.buildStats]
    enable = true
  
  [[build.cachebusters]]
    source = 'assets/notwatching/hugo_stats\.json'
    target = 'css'
  [[build.cachebusters]]
    source = '(postcss|tailwind)\.config\.js'
    target = 'css'

  # Exclure les sections techniques du sitemap et du rendu
  [[build.rules]]
    values = { section = "home-sections" }
    build = "never"
    sitemap = { disable = true }
  

# Module Mounts
# ------------------------------------------------------------------------------
[module]
  [[module.mounts]]
    source = 'assets'
    target = 'assets'
  [[module.mounts]]
    disableWatch = true
    source = 'hugo_stats.json'
    target = 'assets/notwatching/hugo_stats.json'

# Markup Settings
# ------------------------------------------------------------------------------
[markup]
  [markup.goldmark]
    [markup.goldmark.renderer]
      unsafe = true
  [markup.highlight]
    style = 'monokai'
    lineNos = false
    codeFences = true

# Languages
# ==============================================================================
[languages]
  [languages.fr]
    languageCode = 'fr-FR'
    languageName = 'Français'
    weight = 1
    title = 'Marie-Gaëtane Comte'

[params.colors]
  accent = "#D4A574"      # Pour le player