{{/* layouts/_partials/home-sections/latest-podcast.html */}}
<section class="latest-podcast bg-secondary py-10 md:py-20">
    <div class="container mx-auto">
      
      {{/* Header */}}
      <div class="text-center mb-6">
        <h2 class="text-3xl font-bold text-text-primary mb-2 animate-on-scroll-fade-up">
          {{ .Title }}
        </h2>
        <h5 class="text-text-secondary text-center animate-on-scroll-fade-up animate-stagger-1">
          {{ .Content | plainify }}
        </h5>
      </div>
  
      {{/* Grille des podcasts */}}
      {{ $limit := .Params.limit | default 3 }}
      {{ $podcasts := where site.RegularPages "Section" "podcasts" }}
      
      {{ if $podcasts }}
      <div class="max-w-7xl grid md:grid-cols-2 lg:grid-cols-3 gap-8 mx-auto">
        {{ range first $limit $podcasts.ByDate.Reverse }}
          {{- $ep := partial "podcasts/episode-data" . -}}

          {{/* Desktop view card */}}
          <div class="hidden lg:block">
            <a href="{{ $ep.permalink }}" class="flex flex-col h-full bg-primary shadow-lg hover:shadow-2xl transition duration-500 hover:scale-102 border-2 border-accent hover:border-2 hover:border-accent-hover overflow-hidden">
                
              <img src="{{ $ep.image }}" alt="Couverture de l'épisode {{ $ep.title }}" class="w-full h-48 object-cover">

              <div class="p-6 flex flex-col flex-grow">
                <p class="text-tertiary uppercase mb-1">{{ $ep.subtitle | default "Épisode" }}</p>
                <h3 class="text-secondary font-bold mb-2">{{ $ep.title }}</h3>
                <p class="text-primary mb-3 text-sm">
                  {{ $ep.description | plainify | truncate 100 }}...
                </p>
                
                <div class="mt-auto flex flex-wrap justify-between items-center gap-2 text-xs text-text-primary border-t border-accent-primary pt-3">
                  <p class="inline-block bg-accent-primary text-secondary text-xs font-medium px-2 py-1 rounded-full whitespace-nowrap">
                    S{{ $ep.season }}E{{ $ep.episode_number }}
                  </p>
                  <span class="flex items-center whitespace-nowrap">
                    <span class="material-symbols-outlined mr-1 text-base">timer</span>
                    <p>{{ $ep.duration_formatted }}</p>
                  </span>
                  <span class="flex items-center whitespace-nowrap">
                    <span class="material-symbols-outlined mr-1 text-base">calendar_today</span>
                    <p>{{ $ep.date.Format "02/01/06" }}</p>
                  </span>
                </div>
              </div>
            </a>    
          </div>

          {{/* Mobile view card */}}
          <div class="lg:hidden px-4">
            <a href="{{ $ep.permalink }}" class="relative block h-52 border-2 border-accent overflow-hidden shadow-lg animate-on-scroll-fade-up">
            
              <img src="{{ $ep.image }}" alt="{{ $ep.title }}" class="absolute inset-0 w-full h-full object-cover">
              <div class="absolute inset-0 bg-black/30"></div>
            
              <div class="relative h-full flex flex-col justify-between p-3">
                <div>
                  <span class="inline-block bg-accent-primary text-secondary text-xs font-medium px-2 py-1 rounded-full">
                    S{{ $ep.season }}E{{ $ep.episode_number }}
                  </span>
                </div>
            
                <div>
                  <h4 class="text-text-inverse font-bold text-sm leading-tight mb-1">
                    {{ $ep.title }}
                  </h4>
                  <p class="text-text-inverse font-bold text-sm leading-tight mb-1">
                    {{ $ep.subtitle | default "Épisode" }}
                  </p>
                  <div class="flex items-center gap-1 text-text-inverse text-xs">
                    <span class="material-symbols-outlined icon-xs icon-inverse">timer</span>
                    <span>{{ $ep.duration_formatted }}</span>
                  </div>
                </div>
              </div>
            </a>
          </div>
        {{ end }}
      </div>
  
      {{/* Bouton voir tous */}}
      <div class="text-center mt-10 animate-on-scroll-fade-up">
        <a href="/podcasts/" class="btn btn-primary">
          <span class="material-symbols-outlined">podcasts</span>
          Tous les épisodes
        </a>
      </div>
      {{ end }}
  
    </div>
</section>