{{/* layouts/_partials/other-podcasts.html */}}
<section class="other-podcasts bg-primary py-10 md:py-20">
    <div class="container mx-auto px-4">
      
      {{/* Header */}}
      <div class="text-center mb-6">
        <div class="flex justify-center">
          <div class="inline-block bg-accent-primary text-white text-sm font-medium px-3 py-1 rounded-full mb-4 animate-on-scroll-fade-up">
            Podcasts
          </div>
        </div>
        <h2 class="text-3xl font-bold text-text-primary mb-2 animate-on-scroll-fade-up">
          Découvrez les autres épisodes
        </h2>
        <p class="text-text-secondary animate-on-scroll-fade-up animate-stagger-1">
          Continuez votre écoute avec ces épisodes
        </p>
      </div>
  
      {{/* Grille des podcasts */}}
      {{ $currentPage := . }}
      {{ $allPodcasts := where site.RegularPages "Section" "podcasts" }}
      {{ $otherPodcasts := where $allPodcasts "Permalink" "ne" $currentPage.Permalink }}
      {{ $limit := 3 }}
      {{ $fallbackImagePath := "/img/fallback-podcast.png" }}
      
      {{ if $otherPodcasts }}
      <div class="max-w-7xl grid sm:grid-cols-2 lg:grid-cols-3 gap-6 mx-auto">
        {{ range first $limit $otherPodcasts.ByDate.Reverse }}
          
          {{ $image := (index (.Resources.ByType "image") 0) }}
          {{ $subtitle := .Params.subtitle | default "Épisode" }}
          {{ $duration := .Params.duration | default "Non spécifiée" }}
  
          <a href="{{ .Permalink }}" class="relative block h-52 border-2 border-accent overflow-hidden shadow-lg animate-on-scroll-fade-up">
                
            {{/* Image de fond */}}
            {{ if $image }}
                <img src="{{ $image.Permalink }}" alt="{{ .Title }}" class="absolute inset-0 w-full h-full object-cover">
            {{ else }}
                <img src="{{ $fallbackImagePath | relURL }}" alt="Podcast" class="absolute inset-0 w-full h-full object-cover">
            {{ end }}
        
            {{/* Overlay sombre */}}
            <div class="absolute inset-0 bg-black/30"></div>
        
            {{/* Contenu */}}
            <div class="relative h-full flex flex-col justify-between p-3">
                
                {{/* Numéro d'épisode en haut */}}
                <div>
                <p class="inline-block bg-accent-primary text-secondary  font-medium px-2 py-1 rounded-full">
                    Épisode {{ .Params.episode_number | default "?" }}
                </p>
                </div>
        
                {{/* Titre et durée en bas */}}
                <div>
                  <h4 class=" text-text-inverse font-bold text-sm leading-tight  mb-1">
                      {{ .Title }}
                  </h4>
                  <p class=" text-text-inverse font-bold text-sm leading-tight  mb-1">
                      {{ .Params.Subtitle }}
                  </p>

                  <div class="flex items-center gap-1 text-text-inverse text-xs">
                    <span class="material-symbols-outlined icon-xs icon-inverse">timer</span>
                    <p>{{ $duration }}</p>
                    <span class="material-symbols-outlined ml-4 mr-1 text-base">calendar_today</span>
                    <p>{{ .Date.Format "02/01/06" }}</p>
                  </div>
                </div>
        
            </div>
        </a>
        {{ end }}
      </div>
  
      {{/* Bouton voir tous */}}
      <div class="text-center mt-10 animate-on-scroll-fade-up">
        <a href="/podcasts/" class="btn btn-primary">
          <span class="material-symbols-outlined">podcasts</span>
          Tous les épisodes
        </a>
      </div>
      {{ end }}
  
    </div>
  </section>